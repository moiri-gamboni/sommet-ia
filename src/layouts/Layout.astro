---
import { ViewTransitions } from 'astro:transitions';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface Props {
	title?: string;
	description?: string;
}

const { 
	title = "Reprendre le Contr√¥le - Forum des Solutions pour une IA Compatible avec l'Humanit√©",
	description = "Une journ√©e de conf√©rences et d'√©changes sur la gouvernance de l'IA. Face au d√©veloppement rapide de l'IA et aux risques qu'il comporte, nous r√©unissons experts, organisations et citoyens engag√©s pour pr√©senter et discuter des moyens concrets d'orienter le d√©veloppement de l'IA vers un futur positif pour l'humanit√©."
} = Astro.props;
---

<!doctype html>
<html lang="fr" class="h-full bg-red-50 antialiased">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
		<link rel="icon" type="image/png" sizes="192x192" href="/favicon/favicon.png" />
		<link rel="icon" type="image/x-icon" href="/favicon/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		
		<title>{title}</title>
		<meta name="description" content={description} />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content="/share.png" />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={Astro.url} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content="/share.png" />
		
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link 
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=DM+Sans:wght@400;500;700&display=swap" 
			rel="stylesheet"
		/>
		
		<ViewTransitions />
	</head>
	<body class="flex min-h-full">
		<audio id="background-music" src="/christmas-music.mp3" loop style="display:none"></audio>
		
		<!-- Christmas Modal -->
		<div id="christmas-modal" class="fixed inset-0 z-[100] flex items-center justify-center bg-[#eeffee]">
			<!-- Snowflakes container -->
			<div class="absolute inset-0 overflow-hidden pointer-events-none">
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÜ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÜ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÜ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÜ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÜ</div>
				<div class="snowflake">‚ùÖ</div>
				<div class="snowflake">‚ùÜ</div>
				<div class="snowflake">‚ùÖ</div>
			</div>

			<div class="bg-white/90 p-8 rounded-2xl shadow-xl max-w-md mx-4 text-center transform transition-all backdrop-blur-sm">
				<h2 class="text-2xl font-bold text-red-600 mb-4">üéÑ Hey Gilles ! üéÑ</h2>
				<p class="text-green-900 mb-6">Je t'ai pr√©par√© une petite surprise de No√´l ! Clique pour d√©couvrir le site en mode festif !</p>
				<button id="enter-site" class="bg-red-600 hover:bg-red-700 text-white font-medium px-6 py-3 rounded-full transition-colors">
					C'est parti ! üéÖ
				</button>
			</div>
		</div>

		<script>
			const audio = document.getElementById('background-music') as HTMLAudioElement;
			const modal = document.getElementById('christmas-modal');
			const enterButton = document.getElementById('enter-site');

			if (audio && modal && enterButton) {
				audio.volume = 0.3;
				
				enterButton.addEventListener('click', () => {
					// Start music
					audio.play()
						.then(() => {
							// Hide modal with fade effect
							modal.classList.add('opacity-0');
							setTimeout(() => {
								modal.style.display = 'none';
							}, 300);
						})
						.catch(console.error);
				});
			}
		</script>

		<style>
			/* Snowflake animation */
			.snowflake {
				position: absolute;
				color: var(--christmas-green);
				font-size: 2em;
				text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
				animation: snowfall linear infinite;
				top: -5vh;
			}

			@keyframes snowfall {
				0% {
					transform: translateY(0) translateX(0) rotate(0deg);
				}
				100% {
					transform: translateY(110vh) translateX(50px) rotate(360deg);
				}
			}

			/* Position snowflakes randomly across the screen with varying speeds */
			.snowflake:nth-child(1) { left: 12%; animation-duration: 13s; animation-delay: -11s; }
			.snowflake:nth-child(2) { left: 88%; animation-duration: 14s; animation-delay: -1s; }
			.snowflake:nth-child(3) { left: 37%; animation-duration: 15s; animation-delay: -7s; }
			.snowflake:nth-child(4) { left: 63%; animation-duration: 11s; animation-delay: -9s; }
			.snowflake:nth-child(5) { left: 28%; animation-duration: 12s; animation-delay: -3s; }
			.snowflake:nth-child(6) { left: 76%; animation-duration: 13s; animation-delay: -12s; }
			.snowflake:nth-child(7) { left: 44%; animation-duration: 14s; animation-delay: -4s; }
			.snowflake:nth-child(8) { left: 92%; animation-duration: 15s; animation-delay: -8s; }
			.snowflake:nth-child(9) { left: 21%; animation-duration: 11s; animation-delay: -2s; }
			.snowflake:nth-child(10) { left: 55%; animation-duration: 12s; animation-delay: -10s; }
			.snowflake:nth-child(11) { left: 81%; animation-duration: 13s; animation-delay: -5s; }
			.snowflake:nth-child(12) { left: 7%; animation-duration: 14s; animation-delay: -13s; }
			.snowflake:nth-child(13) { left: 69%; animation-duration: 15s; animation-delay: -6s; }
			.snowflake:nth-child(14) { left: 33%; animation-duration: 11s; animation-delay: -14s; }
			.snowflake:nth-child(15) { left: 95%; animation-duration: 12s; animation-delay: -2s; }

			/* Modal transition */
			#christmas-modal {
				transition: opacity 0.3s ease-out;
			}
		</style>

		<div class="flex w-full flex-col">
			<Header />
			<main class="flex-auto">
				<slot />
			</main>
			<Footer />
			<!-- Simple Analytics -->
			<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
			<noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade"/></noscript>
		</div>
	</body>
</html>

<style is:global>
	:root {
		--font-inter: 'Inter', sans-serif;
		--font-dm-sans: 'DM Sans', sans-serif;
		--christmas-red: #c41e3a;
		--christmas-green: #165B33;
		--christmas-gold: #FFD700;
	}

	/* Modal transition */
	#christmas-modal {
		transition: opacity 0.3s ease-out;
	}
</style>
